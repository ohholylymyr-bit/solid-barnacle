<!DOCTYPE html>
<html>
<head>
<title>HamsterInvest</title>
<style>
body { font-family: Arial; margin: 20px; }
.back-arrow { position: fixed; top: 10px; left: 10px; cursor: pointer; font-size: 20px; display:none; }
#dashboard, #crypto-view { margin-top: 50px; }
button { margin: 3px; padding: 5px; }
.crypto-buttons div { margin-top:10px; }
</style>
</head>
<body>

<button class="back-arrow" onclick="showDashboard()">⬅</button>
<h1>HamsterInvest</h1>

<div id="dashboard">
  <h2>Wallet</h2>
  <div id="wallet-display"></div>
  <h2>Portfolio / Sijoitukset</h2>
  <div id="portfolio-display"></div>
  <h2>Kryptot</h2>
  <div id="crypto-buttons"></div>
</div>

<div id="crypto-view" style="display:none;">
  <h2 id="crypto-title"></h2>
  <div id="crypto-wallet"></div>
  <div id="crypto-portfolio"></div>
  <button onclick="buyCryptoView()">Osta</button>
  <button onclick="buyInvestmentView()">Osta sijoitus</button>
  <button onclick="sellInvestmentView()">Myy sijoitus</button>
  <button onclick="withdrawView()">Nosta</button>
</div>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<script>
// Firebase
const firebaseConfig = {
  apiKey: "AIzaSyATO0586cwwqxxV0h1t16WrKfLgbXsy0-g",
  authDomain: "henrybankki-ja-hamster-exc.firebaseapp.com",
  projectId: "henrybankki-ja-hamster-exc",
  storageBucket: "henrybankki-ja-hamster-exc.firebasestorage.app",
  messagingSenderId: "931698320471",
  appId: "1:931698320471:web:b7736abed3c840f9e3ef12",
  measurementId: "G-W603PB8QNK"
};
firebase.initializeApp(firebaseConfig);

// Admin seed
let adminSeed = "watti hamsteri häkki jauhomato auringonkukanSiemen karvaputkilo mökki juoksupyörä laiska ihana hyväluonteinen paras";

// Kryptot nimet
let cryptos = ["WATTI","WUF","JAUHOMATO","AURINKOSIEMEN","HÄKKI","JUOKSUPYÖRÄ","KARVAPUTKILO",
"MÖKKI","LAISKA","IHALA","HYVÄLUONTEINEN","PARAS","SIIRAPPISUKKA","KARKKUKUPPI","RÄPÄTYS","PÖRRÖ","NÖTTI",
"HÖYHEN","PIKKUHIIRI","MURUSEN","TUPLAKUPPI","RAPU","PÖYTÄKYNÄ","PUNAINENPOMMI","KESTOKUPPI","SAKKI",
"NOKKELI","HIIRULAINEN","SUKLAAHIIRI","TALVIHIIRI","KEVÄTHÄKKI","LEIKKIKUPPI","PIENIHAMSTERI",
"SIPSI","MÖRRIMÖLLI","PAKSU","HUPI"];

// Wallet ja portfolio
let wallet = {}; let portfolio = {};
cryptos.forEach(c => { wallet[c]=Math.floor(Math.random()*100); portfolio[c]=0; });

// Näkymän hallinta
let currentCrypto = null;

// Dashboard päivitys
function updateDashboard(){
    document.getElementById('wallet-display').innerHTML=JSON.stringify(wallet,null,2);
    document.getElementById('portfolio-display').innerHTML=JSON.stringify(portfolio,null,2);
}

// Luo napit kryptoille
function createButtons(){
    let container=document.getElementById('crypto-buttons');
    cryptos.forEach(c=>{
        let btn=document.createElement('button');
        btn.textContent=c;
        btn.onclick=()=>showCryptoView(c);
        container.appendChild(btn);
    });
}

// Näytä kryptosivu
function showCryptoView(c){
    currentCrypto=c;
    document.getElementById('crypto-title').textContent=c;
    document.getElementById('crypto-wallet').innerHTML="Wallet: "+wallet[c];
    document.getElementById('crypto-portfolio').innerHTML="Sijoitus: "+portfolio[c];
    document.getElementById('dashboard').style.display="none";
    document.getElementById('crypto-view').style.display="block";
    document.querySelector('.back-arrow').style.display="inline";
}

// Palaa dashboardiin
function showDashboard(){
    document.getElementById('crypto-view').style.display="none";
    document.getElementById('dashboard').style.display="block";
    document.querySelector('.back-arrow').style.display="none";
    updateDashboard();
}

// Toiminnot kryptosivulla
function buyCryptoView(){ wallet[currentCrypto]+=10; updateCryptoView(); redirectToHenryBank(10); }
function buyInvestmentView(){ portfolio[currentCrypto]+=5; updateCryptoView(); }
function sellInvestmentView(){ 
    if(portfolio[currentCrypto]>=2){ portfolio[currentCrypto]-=2; wallet[currentCrypto]+=2; } 
    updateCryptoView(); 
}
function withdrawView(){
    if(wallet[currentCrypto]>=5){ wallet[currentCrypto]-=5; updateCryptoView(); redirectToHenryBank(5); }
}

// Päivitä kryptosivu
function updateCryptoView(){
    document.getElementById('crypto-wallet').innerHTML="Wallet: "+wallet[currentCrypto];
    document.getElementById('crypto-portfolio').innerHTML="Sijoitus: "+portfolio[currentCrypto];
}

// Nosto redirect HenryBankkiin
function redirectToHenryBank(amount){
    let token=Math.random().toString(36).substring(2,15);
    window.location.href="https://henrybank-bw4y.onrender.com?token="+token+"&amount="+amount+"&crypto="+currentCrypto;
}

// Init
updateDashboard(); createButtons();
</script>
</body>
</html>
